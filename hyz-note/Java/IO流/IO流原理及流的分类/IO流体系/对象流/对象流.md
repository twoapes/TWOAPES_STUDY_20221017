# 对象流

对象流（Object Streams）是 Java I/O 中提供的一组流类，用于以二进制形式读取和写入对象。

对象流提供了对对象的读写操作，可以将对象以二进制形式序列化（Serialize）到流中，或从流中反序列化（Deserialize）得到对象。它们是字节流的子类，主要包括以下两个类：

1. ObjectOutputStream：用于将对象写入流中。它接受一个输出流作为参数，并提供了`writeObject()`方法来写入对象。

2. ObjectInputStream：用于从流中读取对象。它接受一个输入流作为参数，并提供了`readObject()`方法来读取对象。

对象流的主要特点如下：

- 对象序列化：对象流可以将对象以二进制形式序列化到流中，包括对象的数据和类信息，使其可以在不同的Java虚拟机或进程之间进行传输和存储。

- 对象反序列化：对象流可以从流中反序列化对象，重新构造出原始的对象，包括对象的数据和类信息。

- 支持自定义对象序列化：对象流不仅支持Java语言内置的基本数据类型和标准类库的对象序列化，还可以通过实现Serializable接口自定义对象的序列化和反序列化过程。

使用对象流的主要优点如下：

- 简化对象的读写操作：对象流提供了高层次的方法来读写对象，避免了手动进行对象的序列化和反序列化的复杂过程。

- 保持对象的完整性：对象流将对象以二进制形式进行读写，保持了对象的完整性，无需进行字符编码和解码。

下面是一个简单的示例，演示了如何使用对象流进行对象的读写操作：

```java
import java.io.*;

class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }
}

public class ObjectStreamDemo {
    public static void main(String[] args) {
        String fileName = "path/to/person.dat";

        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(fileName));
             ObjectInputStream ois = new ObjectInputStream(new FileInputStream(fileName))) {

            // 写入对象
            Person person = new Person("John Doe", 30);
            oos.writeObject(person);

            // 读取对象
            Person restoredPerson = (Person) ois.readObject();

            // 打印读取的对象
            System.out.println("读取的对象：" + restoredPerson);
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```

在上述示例中，我们首先创建了一个`ObjectOutputStream`对象，将其与一个输出流（这里是`FileOutputStream`）关联起来，用于写入对象。

然后，我们创建了一个自定义的`Person`类，并创建一个`Person`对象进行写入。

接下来，我们创建了一个`ObjectInputStream`对象，将其与一个输入流（这里是`FileInputStream`）关联起来，用于读取对象。

我们使用`readObject()`方法从对象流中读取对象，并将其转换为`Person`类型。

最后，我们打印读取的对象到控制台。

需要注意的是，示例中的文件路径需要根据实际情况进行替换。另外，为了避免可能的异常情况，建议在实际使用时进行适当的异常处理和资源管理。

通过对象流，我们可以方便地读写对象，包括自定义的对象，实现对象的序列化和反序列化，便于数据的传输和存储。
