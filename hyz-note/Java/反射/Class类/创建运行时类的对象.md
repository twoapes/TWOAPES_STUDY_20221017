# 创建运行时类的对象

创建类的对象

> 调用Class对象的newInstance()方法

要求
1）类必须有一个无参数的构造器。
2）类的构造器的访问权限需要足够
难道没有无参的构造器就不能创建对象了吗？
不是！只要在操作的时候明确的调用类中的构造器，并将参数传递进去之后，才可以实例化操作
步骤如下
1）通过Class类的`getDeclaredConstructor(Class ... parameterTypes)`取得本类的指定形参类型的构造器
2）向构造器的形参中传递一个对象数组进去，里面包含了构造器中所需的各个参数
3）通过Constructor实例化对象

```java
//1.根据全类名获取对应的Class对象
String name = “atguigu.java.Person";
Class clazz = null;
clazz = Class.forName(name);
//2.调用指定参数结构的构造器，生成Constructor的实例
Constructor con = clazz.getConstructor(String.class,Integer.class);
//3.通过Constructor的实例创建对应类的对象，并初始化类属性
Person p2 = (Person) con.newInstance("Peter",20);
System.out.println(p2);
```

下面是一个简单的示例，演示如何使用Java反射来创建运行时类的对象：

```java
import java.lang.reflect.Constructor;

public class RuntimeClassDemo {
    public static void main(String[] args) {
        try {
            // 获取类的Class对象
            Class<?> clazz = MyClass.class;

            // 使用无参构造函数创建对象
            Object obj1 = clazz.newInstance();
            System.out.println(obj1);

            // 使用带参构造函数创建对象
            Constructor<?> constructor = clazz.getConstructor(String.class, int.class);
            Object obj2 = constructor.newInstance("Example", 42);
            System.out.println(obj2);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

class MyClass {
    private String name;
    private int value;

    public MyClass() {
        this.name = "Default";
        this.value = 0;
    }

    public MyClass(String name, int value) {
        this.name = name;
        this.value = value;
    }

    @Override
    public String toString() {
        return "MyClass [name=" + name + ", value=" + value + "]";
    }
}
```

在上述示例中，我们首先获取了`MyClass`类的Class对象。然后，使用`newInstance()`方法通过无参构造函数创建了一个对象`obj1`，并打印了它的信息。

接下来，我们获取了带参构造函数的Constructor对象，并使用`newInstance()`方法传入参数创建了另一个对象`obj2`，并打印了它的信息。

请注意，在使用反射创建对象时，需要处理`InstantiationException`、`IllegalAccessException`、`NoSuchMethodException`和`InvocationTargetException`等异常。

以上示例演示了如何使用反射来创建运行时类的对象。通过反射，我们可以在运行时动态地加载类、获取构造函数和方法信息，并通过构造函数创建对象，为程序提供更大的灵活性和扩展性。
