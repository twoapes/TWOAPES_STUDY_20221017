# 调用运行时类的指定结构

调用指定方法

通过反射，调用类中的方法，通过Method类完成

步骤
1.通过Class类的getMethod(String name,Class...parameterTypes)方法取得一个Method对象，并设置此方法操作时所需要的参数类型
2.之后使用Object invoke(Object obj, Object[] args)进行调用，并向方法中传递要设置的obj对象的参数信息

Object invoke(Object obj, Object ... args)
说明
1.Object 对应原方法的返回值，若原方法无返回值，此时返回null
2.若原方法若为静态方法，此时形参Object obj可为null
3.若原方法形参列表为空，则Object[] args为null
4.若原方法声明为private,则需要在调用此invoke()方法前，显式调用方法对象的setAccessible(true)方法，将可访问private的方法

调用指定属性

在反射机制中，可以直接通过Field类操作类中的属性，通过Field类提供的set()和get()方法就可以完成设置和取得属性内容的操作

```java
public Field getField(String name) 返回此Class对象表示的类或接口的指定的public的Field。
public Field getDeclaredField(String name)返回此Class对象表示的类或接口的指定的Field。
```

```java
public Object get(Object obj) 取得指定对象obj上此Field的属性内容
public void set(Object obj,Object value) 设置指定对象obj上此Field的属性内容
```

要调用运行时类的指定结构，您可以使用反射机制。反射允许您在运行时检查和操作类的成员，如字段、方法和构造函数。

下面是一个示例，演示如何使用反射调用运行时类的指定方法：

```java
import java.lang.reflect.Method;

public class Main {
    public static void main(String[] args) {
        try {
            // 获取类的实例
            MyClass myObject = new MyClass();

            // 获取类的方法
            Method method = myObject.getClass().getMethod("myMethod", String.class);

            // 调用方法
            method.invoke(myObject, "Hello, World!");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

class MyClass {
    public void myMethod(String message) {
        System.out.println("MyMethod: " + message);
    }
}
```

在上述示例中，我们使用`getMethod()`方法获取了`MyClass`类中名为"myMethod"的方法，并将其存储在`Method`对象中。然后，我们使用`invoke()`方法调用该方法，并传递所需的参数。

需要注意的是，反射操作可能会导致性能下降，并且在不正确使用的情况下可能会引发异常。因此，在使用反射时应谨慎，并确保您了解代码中的潜在风险。
