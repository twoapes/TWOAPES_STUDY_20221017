# 新日期时间API出现的背景

可变性：像日期和时间这样的类应该是不可变的。
偏移性：Date中的年份是从1900开始的，而月份都从0开始。
格式化：格式化只对Date有用，Calendar则不行。
此外，它们也不是线程安全的；不能处理闰秒等。
总结：对日期和时间的操作一直是Java程序员最痛苦的地方之一

- 第三次引入的API是成功的，并且Java 8中引入的java.time API 已经纠正了过去的缺陷，将来很长一段时间内它都会为我们服务

- Java 8 吸收了 Joda-Time 的精华，以一个新的开始为 Java 创建优秀的 API

- 新的 java.time 中包含了所有关于本地日期（LocalDate）、本地时间（LocalTime）、本地日期时间（LocalDateTime）、时区（ZonedDateTime）和持续时间（Duration）的类。历史悠久的 Date 类新增了 toInstant() 方法，用于把 Date 转换成新的表示形式。这些新增的本地化时间日期 API 大大简化了日期时间和本地化的管理

```txt
java.time – 包含值对象的基础包
java.time.chrono – 提供对不同的日历系统的访问
java.time.format – 格式化和解析时间和日期
java.time.temporal – 包括底层框架和扩展特性
java.time.zone – 包含时区支持的类
```

说明：大多数开发者只会用到基础包和format包，也可能会用到temporal包。因此，尽管有68个新的公开类型，大多数开发者，大概将只会用到其中的三分之一
LocalDate、LocalTime、LocalDateTimeLocalDate、LocalTime、LocalDateTime 类是其中较重要的几个类，它们的实例是不可变的对象，分别表示使用 ISO-8601日历系统的日期、时间、日期和时间。它们提供了简单的本地日期或时间，并不包含当前的时间信息，也不包含与时区相关的信息。

- LocalDate代表IOS格式（yyyy-MM-dd）的日期,可以存储 生日、纪念日等日期。

- LocalTime表示一个时间，而不是日期。

- LocalDateTime是用来表示日期和时间的，这是一个最常用的类之一。

注：ISO-8601日历系统是国际标准化组织制定的现代公民的日期和时间的表示法，也就是公历。

![1689836530416](https://twoapes.oss-cn-shenzhen.aliyuncs.com/image/1689836530416.jpg)

新日期时间API的引入背景主要有以下几个原因：

1. 不可变性和线程安全性：旧的`java.util.Date`和`java.util.Calendar`类在设计上是可变的，这导致了线程安全问题。为了避免并发访问时的竞态条件，新的日期时间API引入了不可变性和线程安全性的概念。所有的日期时间类都是不可变的，这意味着它们的值无法修改，因此在多线程环境下更加安全。

2. 设计清晰和易用性：旧的日期时间API存在许多设计上的缺陷和不一致之处。例如，`java.util.Calendar`中的月份是从0开始计数的，而不是从1开始；日期和时间的处理方式也不够直观。新的日期时间API采用了更加一致和直观的设计，提供了清晰的方法来处理日期、时间、时间间隔等。

3. 扩展性和灵活性：新的日期时间API提供了丰富的类和方法来处理日期和时间，可以轻松进行格式化、解析、计算和转换等操作。它还提供了更多的时间单位和功能，例如处理时区、日历系统等，以满足不同的需求。

4. 与现有代码的互操作性：新的日期时间API提供了与旧API之间的转换和互操作性。可以使用适当的转换方法将旧的`java.util.Date`和`java.util.Calendar`对象转换为新的日期时间类，以便与现有代码无缝集成。

总体而言，新日期时间API的引入旨在解决旧API存在的问题，并提供更加清晰、一致、可靠和易用的日期和时间处理功能。它是Java标准库中重要的改进之一，为开发人员提供了更好的日期和时间处理工具。
