# 自定义注解

没有元素的注解称为**标记注解**(marker annotation)

- 定义新的 Annotation 类型使用`@interface`关键字

- 自定义注解自动继承了`java.lang.annotation.Annotation`接口

- Annotation的成员变量在Annotation定义中以无参数方法的形式来声明
其方法名和返回值定义了该成员的名字和类型,我们称为**配置参数**
类型只能是八种基本数据类型、String类型、Class类型、enum类型、Annotation类型、以上所有类型的数组

- 可以在定义Annotation的成员变量时为其指定初始值, 指定成员变量的初始值可使用default关键字

- 如果只有一个参数成员，建议使用参数名为value

- 如果定义的注解含有配置参数，那么使用时必须指定参数值，除非它有默认值
格式是“参数名 = 参数值”，如果只有一个参数成员，且名称为value，可以省略“value=”

- 没有成员定义的Annotation称为**标记**
包含成员变量的Annotation称为**元数据Annotation**

> 如何自定义注解
1.注解声明为@interface
2.内部定义成员， 通常使用value表示
3.可以指定成员的默认值， 使用default定义
4.如果自定义注解没有成员，表明是一个标识作用
5.如果注解有成员,在使用注解时,需要指明成员的值

当您使用Java编写自定义注解时，可以将详细的说明文档作为注释放置在注解类的各个部分。以下是一个包含详细注释的自定义注解示例：

```java
import java.lang.annotation.*;

/**
 * 自定义注解示例
 */
@Retention(RetentionPolicy.RUNTIME) // 注解在运行时可见
@Target(ElementType.METHOD) // 适用于方法
public @interface CustomAnnotation {

    /**
     * 注解成员变量：值
     * @return 注解值
     */
    String value();

    /**
     * 注解成员变量：计数
     * @return 注解计数
     */
    int count() default 1;
}
```

在上述示例中，我们使用了注释对注解的各个部分进行了详细解释。这些注释提供了关于注解类的用途、保留策略、适用目标以及各个成员变量的说明。

在使用自定义注解时，您可以在代码中的适当位置使用注解，并为注解的成员变量提供值。以下是一个示例：

```java
public class MyClass {

    /**
     * 使用自定义注解的示例方法
     */
    @CustomAnnotation(value = "Custom Annotation Example", count = 3)
    public void myMethod() {
        // 方法实现
    }
}
```

在上述示例中，我们将`@CustomAnnotation`注解应用于`myMethod`方法，并为注解的成员变量`value`和`count`提供了相应的值。

如果您需要在运行时获取注解信息，可以使用反射机制。以下是一个获取并打印方法上自定义注解信息的示例：

```java
import java.lang.reflect.Method;

public class Main {

    public static void main(String[] args) throws Exception {
        MyClass obj = new MyClass();
        Method method = obj.getClass().getMethod("myMethod");
        CustomAnnotation annotation = method.getAnnotation(CustomAnnotation.class);

        if (annotation != null) {
            System.out.println("Value: " + annotation.value());
            System.out.println("Count: " + annotation.count());
        }
    }
}
```

在上述示例中，我们使用反射获取`myMethod`方法的注解信息，并打印注解的成员变量值。

通过将详细说明文档作为注释放置在注解类的各个部分，可以帮助其他开发人员更好地理解和使用自定义注解。
